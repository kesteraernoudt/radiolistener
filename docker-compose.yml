services:
  radio-listener:
    build: .
    container_name: radio-listener
    user: "${UID}:${GID}"
    ports:
      - "5000:5000"
    environment:
      - TZ=America/Los_Angeles
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=all
    env_file:
      - .env
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]
    volumes:
      - ./logs:/app/logs
      - ./clips:/app/clips
      - ./config:/app/config
    restart: unless-stopped
  filebrowser:
    image: hurlenko/filebrowser
    ports:
      - 3002:8080
    volumes:
      - ./fb_config:/config
      - .:/data
    environment:
      - PUID=0
      - PGID=0
      - TZ=America/Los_Angeles
      - FB_BASEURL=/filebrowser
      - FB_NOAUTH=true
    restart: unless-stopped
